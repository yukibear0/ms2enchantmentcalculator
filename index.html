<html>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<style>
		.forminput {
			width: 66px;]
			text-align: center
		}
		body {
			background-color: #333333
		}
		h1, label, tr, td, h5, p{
			color: white;	
		}
		label, .head {
			font-weight: bold;
			font-size: 21px;
		}
		.head {
			padding-left: 10px;
			padding-right: 10px;
		}
		div, h1{
			margin: 20px;
		}
		td {
			padding: 3px;
		}
		.extratitle {
			padding-right: 8px;
		}
	</style>
	<script type="text/javascript">
		var numberofrows = 20
		var numberofitems, minnumberofsacrifices, basechance, chanceperitemincrease
	</script>
	<body>
		<h1>Best chance to enchant weapon</h1>
		<form id="inputs">
			<div class=float-left>
				<table>
					<tr>
						<td align="right"><label>Number of items</label></td>
						<td><input type="number" id="numberofitems" class="forminput" min=0 value="10" style="text-align: center;"></td>
					</tr><tr>
						<td align="right"><label>Minimum number of sacrifices</label></td>
						<td><input type="number" id="minnumberofsacrifices" class="forminput" min=0 value="3" style="text-align: center;"></td>
					</tr><tr>
						<td align="right"><label>% Base chance</label></td>
						<td><input type="number" id="basechance" class="forminput" min=0 value="25" style="text-align: center;"></td>
					</tr><tr>
						<td align="right"><label>% Chance per item increase</label></td>
						<td><input type="number" id="chanceperitemincrease" class="forminput" min=0 value="5" style="text-align: center;"></td>
					</tr><tr>
						<td></td><td><input type="button" name="btnSubmit" value="Submit" onclick="myFunction()"></td>
					</tr>
				</table>
				<img src="https://i.imgur.com/Lb5g37m.gif" width="380">
			</div>
		</form>
		<h5 id="max">Max: </h5>
		<div class=float-none>
			<table id="myTable" class='table, table-hover table-bordered'>
			</table>

		</div>
	</body>
	<script type="text/javascript">
		var table = document.getElementById("myTable");
		var failure, chances, row, cell1, cell2
		var values = [];
		function myFunction() {
			numberofitems = parseInt(document.getElementById('numberofitems').value)
			minnumberofsacrifices = parseInt(document.getElementById('minnumberofsacrifices').value)
			basechance = parseInt(document.getElementById('basechance').value)
			chanceperitemincrease = parseInt(document.getElementById('chanceperitemincrease').value)

			while(table.hasChildNodes()) {
		    	table.removeChild(table.firstChild);
		    }
		    row = table.insertRow(-1)
		    cell1 = row.insertCell(0)
		    cell1.innerHTML = "# of sacrifices"
		    cell1.classList.add("head")
		    cell2 = row.insertCell(1)
		    cell2.innerHTML = "Chance"
		    cell2.classList.add("head")

			for (var i=0; i<=numberofrows; i++) {
				row = table.insertRow(-1)
				row.id = "row" + i

				cell1 = row.insertCell(0);
				cell1.innerHTML = i + " extras ";
				cell1.classList.add("extratitle")

				chances = Math.floor(numberofitems/(minnumberofsacrifices+i))
				failure = (100-basechance-i*chanceperitemincrease)/100
				values.push(Math.round((1-Math.pow(failure, chances))*10000)/100)
				cell2 = row.insertCell(1);
				cell2.innerHTML = Math.round((1-Math.pow(failure, chances))*10000)/100 + "%"
				cell2.classList.add("chance")
			}
			values.indexOf(Math.max(...values))
			document.getElementById("max").innerHTML = "Max: " + Math.max(...values) + "%, " + values.indexOf(Math.max(...values)) + " extras"
			values = []
		}
	</script>
	<style type="text/css">
		.extratitle {
			text-align: right;
		}
		.chance {
			text-align: center;
		}
	</style>
</html